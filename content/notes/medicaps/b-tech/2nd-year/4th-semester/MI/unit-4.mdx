---
title: "Unit 4: Microprocessor & Interfacing"
description: Instruction Timing and Interrupts- Timing Diagrams (of various instructions)- T-state, Machine cycle (Opcode fetch, Read / Write, Interrupts, Interrupt Acknowledge, Bus Idle, etc), Interrupts - types (h/ w and s/ w), Maskable / Non maskable and their organization.
date: 2025-01-18
tags: ["Microprocessor & Interfacing", "4th Semester", "2nd Year", "medicaps university"]
published: true
metadata:
  university: "Medicaps University"
  degree: "B Tech"
  semester: "4th Semester"
  subject: "Microprocessor & Interfacing"
---

## Instruction Timing and Interrupts

### Introduction
Instruction timing and interrupts are crucial concepts in the microprocessor. Instruction timing involves understanding how long each instruction takes to execute, while interrupts are mechanisms that temporarily halt the CPU's current process to handle high-priority tasks.

### Instruction Timing

#### Definition:
Instruction timing refers to the time taken by the microprocessor to execute a particular instruction. It is often measured in clock cycles. The number of clock cycles depends on the complexity of the instruction.

#### Types of Instructions:
- **Simple Instructions:** These take fewer clock cycles to execute.
- **Complex Instructions:** These involve multiple steps, taking more clock cycles to execute.

#### Example:
For a given instruction, the microprocessor might take 2 clock cycles to fetch the instruction, 1 cycle to decode, and 3 cycles to execute. Therefore, the total time for instruction execution would be 6 clock cycles.

### Interrupts

#### Definition:
An interrupt is a mechanism that temporarily halts the execution of the current instruction and transfers control to an interrupt service routine (ISR). After handling the interrupt, the processor resumes its previous task.

#### Types of Interrupts:
1. **Hardware Interrupts:** Generated by external hardware devices (e.g., keyboards, sensors).
2. **Software Interrupts:** Generated by software instructions to request services from the operating system.

#### Interrupt Process:
1. **Interrupt Request (IRQ):** The device sends an interrupt signal.
2. **Interrupt Acknowledgement:** The processor acknowledges the interrupt.
3. **Interrupt Service Routine (ISR):** The CPU executes the ISR.
4. **Return from Interrupt:** The CPU resumes the interrupted task.

### Example of Interrupt in a Microprocessor:
When the microprocessor is executing an instruction, and an external hardware device (like a timer or keyboard) sends an interrupt request, the processor will stop its current task and jump to an ISR. After the ISR is completed, the processor returns to the original task.

ðŸ’¡ **TIP:** Interrupts allow for efficient multitasking in systems with multiple devices needing attention simultaneously.

---

## Timing Diagrams (of Various Instructions)

### Introduction
Timing diagrams are graphical representations that illustrate the sequence of events for a particular instruction in a microprocessor. They show how control signals, clock cycles, and other factors interact during the execution of an instruction.

### Types of Instructions in Timing Diagrams

Timing diagrams are typically drawn for different types of instructions to demonstrate how each phase of the instruction cycle (fetch, decode, execute) occurs over time.

#### 1. **Opcode Fetch**
The **Opcode Fetch** is the first step in the execution cycle. It involves fetching the opcode (operation code) of the instruction from memory.

**Timing Diagram of Opcode Fetch:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       M   M   M   M
   Data:          I1  I1  I2  I3
   Control Signals: | A | RD | M/IO |
```

#### 2. **Memory Read/Write**
The **Memory Read/Write** operation involves reading data from or writing data to memory. The timing diagram will differ based on whether it's a read or write operation.

**Timing Diagram of Memory Read:**

```plaintext
    Clock Cycle: 1   2   3   4
    Address:       M   M   M   M
    Data:          D1  D2  D3  D4
    Control Signals: | RD | M/IO |
```

#### 3. **Execution of an Instruction**
This phase occurs after fetching and decoding the instruction. Depending on the complexity of the instruction, there could be different stages for execution (e.g., ALU operations).

**Timing Diagram of an ALU Instruction Execution:**

```plaintext
   Clock Cycle: 1   2   3   4   5   6
   ALU Inputs:  A   B   A   B   C   D
   ALU Output:  O   O   O   O   O   O
   Control Signals: | ALU | EN | WR |
```

#### 4. **Interrupt Acknowledgement**
For instructions that involve an interrupt, the timing diagram would include the interrupt acknowledge cycle.

**Timing Diagram of Interrupt Acknowledgement:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       M   M   M   M
   Data:          IRQ IRQ  ISR ISR
   Control Signals: | INTA| INTA |
```

ðŸ’¡ **TIP:** Timing diagrams help in understanding how a microprocessor handles various instructions and their interaction with memory, registers, and I/O devices.

---

## T-State

### Introduction
The **T-State** refers to a single clock cycle in a microprocessor's operation. It is a fundamental unit of time used to measure how long an instruction takes to execute. The total number of T-states for an instruction execution depends on its complexity.

### T-State and Machine Cycle
Each machine cycle consists of several T-states. A **machine cycle** typically includes fetching, decoding, and executing instructions, and it might take more than one T-state for each of these steps.

#### Types of T-States:
1. **Fetch T-State:** Involves reading the instruction from memory.
2. **Decode T-State:** Involves decoding the instruction to determine which operation to perform.
3. **Execute T-State:** Involves performing the operation specified by the instruction, like an ALU operation.

#### Example:
For a microprocessor with a clock speed of 2 MHz, each T-state will last **500 nanoseconds**. If an instruction takes 4 T-states to execute, the total time for executing the instruction will be **2 microseconds**.

ðŸ’¡ **TIP:** Understanding the T-State helps in performance analysis, especially when optimizing instruction cycles in microprocessors.

---

## Machine Cycle

### Introduction
A **Machine Cycle** refers to the basic operations that the microprocessor performs to execute an instruction. It consists of multiple T-states and represents the time required for tasks such as fetching an opcode, reading or writing data, handling interrupts, and more. A machine cycle can vary in duration depending on the complexity of the instruction.

### Types of Machine Cycles

#### 1. **Opcode Fetch**
The **Opcode Fetch** machine cycle is the first step where the microprocessor fetches the instruction from memory. During this cycle, the opcode is retrieved from the memory address specified by the program counter.

**Timing Diagram:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       M   M   M   M
   Data:          I1  I2  I3  I4
   Control Signals: | A | RD | M/IO |
```

#### 2. **Memory Read/Write**
This machine cycle is used for either reading data from memory or writing data to memory. The control signals **RD** (Read) and **WR** (Write) manage the operation.

- **Memory Read:** Data is read from the memory location.

**Timing Diagram of Memory Read:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       M   M   M   M
   Data:          D1  D2  D3  D4
   Control Signals: | RD | M/IO |
```

#### 3. **Interrupts**
The **Interrupt** machine cycle is initiated when an interrupt request (IRQ) is generated by an external device or software. The interrupt is serviced by halting the current instruction cycle and executing an interrupt service routine (ISR).

**Timing Diagram for Interrupts:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       M   M   M   M
   Data:          IRQ IRQ  ISR ISR
   Control Signals: | INTA| INTA |
```

#### 4. **Interrupt Acknowledge**
In this cycle, the microprocessor acknowledges the interrupt and begins executing the interrupt service routine (ISR). The interrupt acknowledge signal is sent to the device to confirm that the interrupt is being processed.

**Timing Diagram for Interrupt Acknowledge:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       M   M   M   M
   Data:          IRQ IRQ  ISR ISR
   Control Signals: | INTA| INTA |
```

#### 5. **Bus Idle**
The **Bus Idle** cycle occurs when the microprocessor is not actively using the system bus. During this time, no data is transferred between the microprocessor and memory or I/O devices.

**Timing Diagram for Bus Idle:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       -   -   -   -
   Data:          -   -   -   -
   Control Signals: | I/O | RD/WR |
```

ðŸ’¡ **TIP:** The duration and complexity of each machine cycle can vary, influencing the overall performance of the microprocessor and its ability to handle multiple tasks efficiently.

---

## Interrupts: Types (Hardware and Software)

### Introduction
An **interrupt** is a signal sent to the processor to gain its attention. Interrupts allow the processor to stop its current operations and respond to more urgent tasks. There are two main types of interrupts: **Hardware Interrupts** and **Software Interrupts**.

### 1. **Hardware Interrupts**
A **Hardware Interrupt** is triggered by an external device, usually a hardware peripheral, to alert the processor about an event that needs attention. These interrupts typically have higher priority over software interrupts.

#### Characteristics of Hardware Interrupts:
- Triggered by external devices like keyboards, mice, or timers.
- Hardware components use specific interrupt lines (IRQ) to send requests to the processor.
- Typically faster, as they donâ€™t require software intervention.
- Hardware interrupts can be masked or disabled to prevent interruptions.

#### Example of Hardware Interrupts:
- **Timer Interrupts:** Generated by the system timer to perform time-based operations.
- **External Device Interrupts:** Triggered when a peripheral device like a keyboard or mouse requires attention.

**Timing Diagram for Hardware Interrupt:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       M   M   M   M
   Data:          IRQ IRQ  ISR ISR
   Control Signals: | INTA| INTA |
```

#### 2. **Software Interrupts**
A **Software Interrupt** is generated by a program or software to request a service from the operating system or to perform certain operations. It is initiated through specific machine instructions that tell the processor to stop and process the interrupt.

### Characteristics of Software Interrupts:
- Triggered by a software instruction rather than an external hardware event.
- Used for system calls or when a program needs to communicate with the operating system.
- Often used for implementing system services like file handling or memory management.
- Can be initiated manually by the programmer.

### Example of Software Interrupts:
- **System Calls:** Software instructions to request services from the operating system (e.g., file operations).
- **Breakpoints:** Used in debugging to interrupt the execution at specific points.

**Timing Diagram for Software Interrupt:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       M   M   M   M
   Data:          IRQ IRQ  ISR ISR
   Control Signals: | INT | INTA |
```

ðŸ’¡ **TIP:** Software interrupts are often used in scenarios where the program needs to request services from the operating system, while hardware interrupts are used for external events like input devices or timers.

## Maskable and Non-Maskable Interrupts

### Introduction
Interrupts can be classified as **maskable** or **non-maskable** based on whether they can be disabled (or "masked") by the processor during execution. Understanding the differences between these types of interrupts is crucial for managing critical system tasks and ensuring responsive processing.

### 1. **Maskable Interrupts (IRQ)**
A **Maskable Interrupt** is an interrupt that can be disabled or ignored by the processor using specific control bits in the interrupt control register. This allows the processor to temporarily ignore certain interrupts to finish executing more urgent tasks.

#### Characteristics of Maskable Interrupts:
- Can be **disabled** or **masked** by the processor using a flag (like the interrupt enable bit).
- Typically used for non-critical operations where interrupt handling is not urgent.
- Maskable interrupts are usually used for peripherals like timers, keyboards, or serial ports.
- These interrupts are lower-priority than non-maskable interrupts.

#### Example:
- **Keyboard Interrupt:** The processor can mask a keyboard interrupt if it's executing a more important task, such as processing critical data from another device.

**Timing Diagram for Maskable Interrupt:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       M   M   M   M
   Data:          IRQ IRQ  ISR ISR
   Control Signals: | INT | INTA |
```

#### 2. **Non-Maskable Interrupts (NMI)**
A **Non-Maskable Interrupt (NMI)** is an interrupt that cannot be disabled by the processor. Even if interrupts are disabled globally, the processor will still respond to non-maskable interrupts because they are considered critical to system operation.

### Characteristics of Non-Maskable Interrupts:
- Cannot be **masked** or **disabled**, ensuring they are always serviced.
- Typically used for critical operations like **power failure**, **hardware malfunctions**, or **emergency stops**.
- **Non-maskable interrupts** have a **higher priority** than maskable interrupts.
- They allow the processor to quickly handle serious problems that could otherwise lead to system failure.

### Example:
- **Power Failure Interrupt:** This interrupt is used to save critical data to memory when power is lost, and cannot be ignored.

**Timing Diagram for Non-Maskable Interrupt:**

```plaintext
   Clock Cycle: 1   2   3   4
   Address:       M   M   M   M
   Data:          IRQ IRQ  ISR ISR
   Control Signals: | NMI | INTA |
```

ðŸ’¡ **TIP:** Non-maskable interrupts are used for time-sensitive operations that must be handled immediately, whereas maskable interrupts allow the processor to prioritize other tasks before addressing less critical events.

---
